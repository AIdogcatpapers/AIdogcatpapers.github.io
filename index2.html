
new Chart(document.getElementById('directionChart'), {
    type: 'doughnut',
    data: {
        labels: ['皮肤病', '心脏疾病', '骨科疾病', '神经疾病', '呼吸疾病', '眼科疾病', '寄生虫检测', '健康预测'],
        datasets: [{
            data: [21, 17, 15, 8, 12, 7, 9, 13],
            backgroundColor: ['#2563eb', '#3b82f6', '#60a5fa', '#93c5fd', '#bfdbfe', '#dbeafe', '#eff6ff', '#9cc9ff']
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' }
        }
    }
});
new Chart(document.getElementById('regionPieChart'), {
    type: 'pie',
    data: {
        labels: ['USA', 'India', 'Korea', 'UK', 'Italy', 'Portugal', 'Germany', 'France', 'China', 'Canada', 'Others'],
        datasets: [{
            data: [30, 23, 20, 14, 14, 10, 10, 7, 6, 6, 28],
            backgroundColor: [
                '#2563eb', '#3b82f6', '#60a5fa', '#93c5fd', '#bfdbfe',
                '#10b981', '#34d399', '#6ee7b7', '#a7f3d0', '#d1fae5', '#9ca3af'
            ]
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            tooltip: {
                callbacks: {
                    label: (ctx) => `${ctx.label}: ${ctx.raw}篇 (${((ctx.raw / 154) * 100).toFixed(1)}%)`
                }
            }
        }
    }
});

new Chart(document.getElementById('regionBarChart'), {
    type: 'bar',
    data: {
        labels: ['USA', 'India', 'Korea', 'UK', 'Italy', 'Portugal', 'Germany', 'France', 'China', 'Canada'],
        datasets: [{
            label: '论文数量',
            data: [30, 23, 20, 14, 14, 10, 10, 7, 6, 6],
            backgroundColor: '#2563eb'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: { beginAtZero: true }
        }
    }
});

const detailedCountries = [
    "美国", "印度", "韩国", "英国", "意大利", "葡萄牙", "德国", "法国", "中国", "加拿大",
    "泰国", "瑞士", "丹麦", "巴西", "瑞典", "波兰", "土耳其", "日本", "挪威", "澳大利亚", "西班牙", "其他国家"
];
const detailedCounts = [30, 23, 20, 14, 14, 10, 10, 7, 6, 6, 5, 5, 4, 4, 4, 4, 3, 3, 3, 3, 3, 28];
const detailedPercentages = [
    14.4, 11.0, 9.6, 6.7, 6.7, 4.8, 4.8, 3.3, 2.9, 2.9,
    2.4, 2.4, 1.9, 1.9, 1.9, 1.9, 1.4, 1.4, 1.4, 1.4, 1.4, 13.4
];

const blueColors = [];
for (let i = 0; i < 21; i++) {
    const intensity = 0.4 + (i / 20) * 0.5; // 从0.4到0.9
    blueColors.push(`rgba(37, 99, 235, ${intensity})`); // 基础蓝色 #2563eb
}
const detailedColors = [...blueColors, '#555555'];

new Chart(document.getElementById('detailedCountryChart'), {
    type: 'bar',
    data: {
        labels: detailedCountries,
        datasets: [{
            label: '论文数量',
            data: detailedCounts,
            backgroundColor: detailedColors,
            borderColor: 'rgba(0,0,0,0.1)',
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { display: false },
            tooltip: {
                callbacks: {
                    label: (ctx) => `${ctx.raw}篇 (${detailedPercentages[ctx.dataIndex]}%)`
                }
            },
            datalabels: {
                align: 'end',
                offset: 6,
                formatter: (value, context) => {
                    return value + '篇\n(' + detailedPercentages[context.dataIndex] + '%)';
                },
                font: { size: 10, weight: 'bold' },
                color: '#1e293b'
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                max: 40,
                grid: { color: '#e5e7eb', lineWidth: 0.5 },
                ticks: { stepSize: 5, font: { size: 11 } }
            },
            x: {
                ticks: { font: { size: 11 }, maxRotation: 45, minRotation: 45 }
            }
        }
    },
    plugins: [ChartDataLabels] // 启用datalabels插件
});

